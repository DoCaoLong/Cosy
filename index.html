<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./global.css">
  <link rel="stylesheet" href="./login.css">
  <link rel="stylesheet" href="./fonts/stylesheet.css">
  <title>Cosy</title>
</head>

<body>
  <div class="container-cosy">
    <div class="wraper-login">
      <form id="form-login">
        <p class="fs-title">Thông tin đăng nhập</p>
        <div class="input-row">
          <input id="username" class="input-cosy " type="text" name="username" placeholder="Tài khoản (*):" />
          <p class="error-text">error</p>
        </div>
        <div class="input-row">
          <input id="password" class="input-cosy " type="text" name="password" placeholder="Mật khẩu (*):" />
          <p class="error-text">error</p>
        </div>
        <div class="wrap-btn pt-36px">
          <div class="button-global">
            <button onclick="login()" type="button" id="btn-login" class="action-button"> Đăng nhập </button>
          </div>

        </div>
      </form>
    </div>
  </div>
  <script>
    const inputEles = document.querySelectorAll(".input-row");
    const usernameEle = document.getElementById("username");
    const passwordEle = document.getElementById("password");

    function login() {
      Array.from(inputEles).map((ele) =>
        ele.classList.remove("success", "error")
      );
      let isValid = checkValidate();
      // handle submit
      if (isValid) {
        console.log(isValid)
        window.location.pathname = "step1/step1.html"
      }
      return isValid;
    }
    function checkValidate() {
      let usernameValue = usernameEle.value;
      let passwordValue = passwordEle.value;
      let isCheck = true;

      if (usernameValue == "") {
        setError(usernameEle, "Tên tài khoản không được để trống");
        isCheck = false;
      } else {
        setSuccess(usernameEle);
      }

      if (passwordValue == "") {
        setError(passwordEle, "Mật khẩu không được để trống");
        isCheck = false;
      } else {
        setSuccess(passwordEle);
      }

      if (isCheck) {
        let values = {
          username: usernameValue,
          password: passwordValue,
        };
        return values;
      }
    }

    function setSuccess(ele) {
      ele.parentNode.classList.add("success");
    }

    function setError(ele, message) {
      let parentEle = ele.parentNode;
      parentEle.classList.add("error");
      parentEle.querySelector("p").innerText = message;
    }

  </script>
</body>

</html>